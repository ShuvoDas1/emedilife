(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[4313],{74313:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RolesModule:()=>R});var a=n(61116),i=n(33464),o=n(42237),r=n(35366),l=n(92935),c=n(94978),d=n(68370),s=n(99896),m=n(31269);function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275attribute"]("data-label","Name"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.viewValue)}}let p=(()=>{class e{constructor(e,t,n,a,i){this.dialog=e,this.adminDataService=t,this.reloadService=n,this.uiService=a,this.spinner=i,this.adminRoles=o.kI}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.uw),r["\u0275\u0275directiveInject"](c.O),r["\u0275\u0275directiveInject"](d.f),r["\u0275\u0275directiveInject"](s.F),r["\u0275\u0275directiveInject"](m.t2))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-users"]],decls:14,vars:3,consts:[[1,"header"],[1,"center-square"],[1,"table-container"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],["bdColor","rgba(0,0,0,0.25)","size","medium","color","#fff","type","ball-clip-rotate",2,"width","100vw","height","100vh",3,"fullScreen"],[2,"color","white"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h2"),r["\u0275\u0275text"](2,"Admin Roles"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](3,"hr",1),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"table"),r["\u0275\u0275elementStart"](6,"thead"),r["\u0275\u0275elementStart"](7,"tr",3),r["\u0275\u0275elementStart"](8,"th",4),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,g,3,2,"tr",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"ngx-spinner",6),r["\u0275\u0275elementStart"](12,"p",7),r["\u0275\u0275text"](13," Loading... "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"]("Name"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.adminRoles),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fullScreen",!0))},directives:[a.NgForOf,m.Ro],styles:[".table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;border:1px solid #ccc;border-collapse:collapse;margin:0;padding:0;width:100%;font-size:16px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:24px;margin:.5em 0 .75em;font-weight:700}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.625em;text-align:center;word-wrap:anywhere}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;background-color:#017970;color:#dbe9ff}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{height:45px;border:none;outline:none;font-size:16px;font-weight:700;padding:0 15px;box-sizing:border-box;overflow:hidden;background:#b9d8fb}@media screen and (min-width:670px) and (max-width:850px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#017970}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}@media screen and (max-width:600px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#017970}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}.top-action[_ngcontent-%COMP%]{text-align:right;margin-top:16px;padding-right:16px}.top-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-family:Open Sans,sans-serif}"]}),e})();var u=n(31041);const h=[{_id:"1",pageId:"2",routerLink:"/admin/customization",name:"Customize"},{_id:"2",pageId:"",routerLink:"/admin/products",name:"Product"},{_id:"3",pageId:"1",routerLink:"/admin/categories",name:"Categories"},{_id:"4",pageId:"4",routerLink:"/admin/sales",name:"Sales"},{_id:"6",pageId:"51",routerLink:"/admin/roles",name:"Roles"}],f=[{value:1,viewValue:"Read"},{value:2,viewValue:"Write"},{value:3,viewValue:"Delete"}];var b=n(35946),C=n(56507),O=n(35965),P=n(13070),v=n(9550),_=n(13841),M=n(84369),x=n(87064),S=n(77307);function w(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-option",15),r["\u0275\u0275listener"]("onSelectionChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onSelectPage(t)}),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function y(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"h4"),r["\u0275\u0275text"](1,"Pages List and Access"),r["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",23),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e.value),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",e.viewValue," ")}}function I(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275elementStart"](1,"mat-form-field",17),r["\u0275\u0275elementStart"](2,"mat-label"),r["\u0275\u0275text"](3,"Page Url"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",18),r["\u0275\u0275elementStart"](5,"mat-error"),r["\u0275\u0275text"](6,"This field is required"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",17),r["\u0275\u0275elementStart"](8,"mat-label"),r["\u0275\u0275text"](9,"Modify Access"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-select",19),r["\u0275\u0275template"](11,E,2,2,"mat-option",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"mat-error"),r["\u0275\u0275text"](13,"This field is required."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"button",21),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).index;return r["\u0275\u0275nextContext"]().removePagesField(t)}),r["\u0275\u0275elementStart"](15,"mat-icon",22),r["\u0275\u0275text"](16,"delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("formGroupName",e),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngForOf",n.modifyAccess)}}let F=(()=>{class e{constructor(e,t,n,a,i,o,r){this.fb=e,this.activatedRoute=t,this.adminDataService=n,this.adminService=a,this.uiService=i,this.utilsService=o,this.spinner=r,this.pages=[],this.modifyAccess=[],this.selectedPages=[]}ngOnInit(){this.initFormBuilder(),this.pages=h,this.modifyAccess=f,this.activatedRoute.paramMap.subscribe(e=>{this.id=e.get("id"),this.id&&this.getSingleRoleById()})}initFormBuilder(){this.dataForm=this.fb.group({name:[null,u.kI.required],slug:[null],priority:[null,u.kI.required],access:this.fb.array([])}),this.pagesArray=this.dataForm.get("access")}setFormValue(){const e=this.role.access;this.selectedPages=this.pages.filter(t=>e.some(e=>t.routerLink===e.page)),this.selectedPages.map(()=>{var e;const t=this.fb.group({page:[null],modify:[null]});(null===(e=this.dataForm)||void 0===e?void 0:e.get("access")).push(t)}),this.dataForm.patchValue(this.role)}addAdminRole(e){this.spinner.show(),this.adminDataService.addAdminRole(e).subscribe(e=>{this.spinner.hide(),this.uiService.success(e.message)},e=>{this.spinner.hide(),console.log(e)})}getSingleRoleById(){this.spinner.show(),this.adminDataService.getSingleRoleById(this.id).subscribe(e=>{this.role=e.data,this.spinner.hide(),this.setFormValue()},e=>{this.spinner.hide(),console.log(e)})}editAdminRole(e){this.spinner.show(),this.adminDataService.editAdminRole(e).subscribe(e=>{this.uiService.success(e.message)},e=>{this.spinner.hide(),console.log(e)})}onSelectPage(e){var t;if(e.isUserInput&&-1===this.selectedPages.findIndex(t=>t._id===e.source.value._id)){this.selectedPages.push(e.source.value);const n=this.fb.group({page:e.source.value.routerLink,pageId:e.source.value.pageId,modify:[null,u.kI.required]});(null===(t=this.dataForm)||void 0===t?void 0:t.get("access")).push(n)}}removePagesField(e){var t;null===(t=this.pagesArray)||void 0===t||t.removeAt(e),this.selectedPages.splice(e,1)}onSubmit(){var e;if(this.dataForm.invalid)return void this.uiService.warn("Please filed all the required field");const t=this.utilsService.slugWithoutSymbol(null===(e=this.dataForm)||void 0===e?void 0:e.value.name),n=Object.assign(Object.assign({},this.dataForm.value),{slug:t});if(this.role){const e=Object.assign(Object.assign({},n),{_id:this.role._id});this.editAdminRole(e)}else this.addAdminRole(n)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](u.qu),r["\u0275\u0275directiveInject"](i.gz),r["\u0275\u0275directiveInject"](c.O),r["\u0275\u0275directiveInject"](b.l),r["\u0275\u0275directiveInject"](s.F),r["\u0275\u0275directiveInject"](C.F),r["\u0275\u0275directiveInject"](m.t2))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-user"]],decls:30,vars:5,consts:[["fxLayout","row wrap",3,"formGroup","ngSubmit"],["appearance","outline","fxFlex","50",1,"px-2"],["formControlName","name","matInput","","placeholder","Enter role name","required",""],["formControlName","priority","matInput","","placeholder","Enter priority number","type","number","required",""],["appearance","outline","fxFlex","100",1,"px-2"],["required",""],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["formArrayName","access"],[1,"title","px-2"],[4,"ngIf"],["class","table-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"action","px-2"],["mat-raised-button","","color","primary","type","submit"],["bdColor","rgba(0,0,0,0.25)","size","medium","color","#fff","type","ball-clip-rotate",2,"width","100vw","height","100vh",3,"fullScreen"],[2,"color","white"],[3,"value","onSelectionChange"],[1,"table-row",3,"formGroupName"],["appearance","outline","fxFlex","50",1,"px-2","w-100"],["formControlName","page","matInput","","placeholder","page","type","text","readonly",""],["formControlName","modify","required","","multiple",""],[3,"value",4,"ngFor","ngForOf"],["mat-mini-fab","","color","warn",2,"margin-top","12px",3,"click"],[2,"color","#fff"],[3,"value"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),r["\u0275\u0275elementStart"](1,"mat-form-field",1),r["\u0275\u0275elementStart"](2,"mat-label"),r["\u0275\u0275text"](3,"Role Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",2),r["\u0275\u0275elementStart"](5,"mat-error"),r["\u0275\u0275text"](6,"This field is required"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",1),r["\u0275\u0275elementStart"](8,"mat-label"),r["\u0275\u0275text"](9,"Priority"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",3),r["\u0275\u0275elementStart"](11,"mat-error"),r["\u0275\u0275text"](12,"This field is required"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"mat-form-field",4),r["\u0275\u0275elementStart"](14,"mat-label"),r["\u0275\u0275text"](15,"Select page"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"mat-select",5),r["\u0275\u0275template"](17,w,2,2,"mat-option",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"mat-error"),r["\u0275\u0275text"](19,"This field is required."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerStart"](20,7),r["\u0275\u0275elementStart"](21,"div",8),r["\u0275\u0275template"](22,y,2,0,"h4",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](23,I,17,2,"div",10),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementStart"](24,"div",11),r["\u0275\u0275elementStart"](25,"button",12),r["\u0275\u0275text"](26,"Add User"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"ngx-spinner",13),r["\u0275\u0275elementStart"](28,"p",14),r["\u0275\u0275text"](29," Loading... "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.dataForm),r["\u0275\u0275advance"](17),r["\u0275\u0275property"]("ngForOf",t.pages),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",(null==t.pagesArray?null:t.pagesArray.controls.length)>0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",null==t.pagesArray?null:t.pagesArray.controls),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("fullScreen",!0))},directives:[u._Y,u.JL,O.xw,u.sg,P.KE,O.yH,P.hX,u.Fj,v.Nt,u.JJ,u.u,u.Q7,P.TO,u.wV,_.gD,a.NgForOf,u.CE,a.NgIf,M.lW,m.Ro,x.ey,u.x0,S.Hw],styles:["form[_ngcontent-%COMP%]{max-width:850px;margin:45px auto}.table-row[_ngcontent-%COMP%], .title[_ngcontent-%COMP%], form[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.title[_ngcontent-%COMP%]{padding-bottom:10px}.title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ff8b10}.action[_ngcontent-%COMP%]{width:100%;display:flex;margin:12px 0}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}"]}),e})();const j=[{path:"",component:p},{path:"add-new-role",component:F},{path:"edit-role/:id",component:F}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(j)],i.Bz]}),e})();var A=n(56861),N=n(77154);let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,k,u.UX,A.q,N.o9,m.ef]]}),e})()},42237:(e,t,n)=>{"use strict";n.d(t,{kI:()=>o,mb:()=>r,id:()=>l,MX:()=>c});var a=n(48737),i=n(73092);const o=[{value:a.$.SUPER_ADMIN,viewValue:"Super Admin"},{value:a.$.ADMIN,viewValue:"Admin"},{value:a.$.EDITOR,viewValue:"Editor"}],r=[{value:"Male",viewValue:"Male"},{value:"Female",viewValue:"Female"},{value:"Others",viewValue:"Others"}],l=[{value:i.J.NON_FEATURED,viewValue:"No"},{value:i.J.FEATURED,viewValue:"Yes"}],c=["Barisal","Bhairab","Bogra","Brahmanbaria","Chandpur","Chittagong","Chowmuhani","Chuadanga","Comilla","Cox's Bazar","Dhaka","Dinajpur","Faridpur","Feni","Gazipur","Jamalpur","Jessore","Jhenaidah","Kaliakair","Khulna","Kishoreganj","Kushtia","Maijdee","Manikganj","Mymensingh","Naogaon","Narayanganj","Narsingdi","Nawabganj","Pabna","Rajshahi","Rangpur","Saidpur","Satkhira","Savar","Siddhirganj","Sirajganj","Sreepur","Sylhet","Tangail","Tongi"]},73092:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var a=function(e){return e.FEATURED="1",e.NON_FEATURED="0",e}({})}}]);