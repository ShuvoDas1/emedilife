(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[8341],{78341:(t,e,n)=>{"use strict";n.r(e),n.d(e,{TransactionsModule:()=>S});var a=n(61116),o=n(33464),r=n(87514),i=n(31153),c=n(35366),l=n(31179),d=n(31269),s=n(56507),p=n(29282),g=n(84369),b=n(77307),u=n(92154);const m=["dataTable"];function h(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275elementStart"](1,"button",11),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"]().exportToExcel()}),c["\u0275\u0275text"](2,"Export as Excel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}const P=function(t){return["../../","orders","order-details",t]};function C(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td",12),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"slugToNormal"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275elementStart"](12,"button",13),c["\u0275\u0275elementStart"](13,"mat-icon"),c["\u0275\u0275text"](14,"visibility"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275attribute"]("data-label","Order"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](t.orderId?"#"+t.orderId:"N/A"),c["\u0275\u0275advance"](1),c["\u0275\u0275attribute"]("data-label","Date"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](5,10,t.checkoutDate)),c["\u0275\u0275advance"](2),c["\u0275\u0275attribute"]("data-label","Payment Type"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind2"](8,12,t.paymentMethod,"_")),c["\u0275\u0275advance"](2),c["\u0275\u0275attribute"]("data-label","Total"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"]("\u09f3 ",t.totalAmount,""),c["\u0275\u0275advance"](1),c["\u0275\u0275attribute"]("data-label","Actions"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](15,P,t._id))}}const O=function(t,e,n){return{itemsPerPage:t,currentPage:e,totalItems:n}},_=[{path:"",component:(()=>{class t{constructor(t,e,n,a,o){this.orderService=t,this.router=e,this.activatedRoute=n,this.spinner=a,this.utilsService=o,this.orderEnum=r.i,this.transactions=[],this.currentPage=1,this.totalProducts=0,this.productsPerPage=5,this.totalProductsStore=0}ngOnInit(){this.subAcRoute=this.activatedRoute.queryParams.subscribe(t=>{this.currentPage=t&&t.page?t.page:1,this.getAllTransactionByAdmin()})}getAllTransactionByAdmin(){this.spinner.show();const t={pageSize:this.productsPerPage.toString(),currentPage:this.currentPage.toString()};this.orderService.getAllTransactionByAdmin(t).subscribe(t=>{this.transactions=t.data,this.totalProducts=t.count},t=>{console.log(t)})}onPageChanged(t){this.router.navigate([],{queryParams:{page:t}})}exportToExcel(){var t;const e=i.utils.table_to_sheet(null===(t=this.dataTable)||void 0===t?void 0:t.nativeElement),n=i.utils.book_new(),a=this.utilsService.getDateString(new Date);i.utils.book_append_sheet(n,e,"Sheet1"),i.writeFile(n,`Transaction_${a}.xlsx`)}ngOnDestroy(){this.subAcRoute&&this.subAcRoute.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](l.p),c["\u0275\u0275directiveInject"](o.F0),c["\u0275\u0275directiveInject"](o.gz),c["\u0275\u0275directiveInject"](d.t2),c["\u0275\u0275directiveInject"](s.F))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-transactions"]],viewQuery:function(t,e){if(1&t&&c["\u0275\u0275viewQuery"](m,5),2&t){let t;c["\u0275\u0275queryRefresh"](t=c["\u0275\u0275loadQuery"]())&&(e.dataTable=t.first)}},decls:24,vars:16,consts:[[1,"header"],["class","download",4,"ngIf"],[1,"center-square"],[1,"table-container"],["dataTable",""],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"product-pagination",3,"autoHide","maxSize","pageChange"],[1,"download"],["mat-raised-button","","color","primary",3,"click"],[1,"italic"],["mat-mini-fab","","color","accent",2,"margin-right","5px",3,"routerLink"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h2"),c["\u0275\u0275text"](2,"Transactions"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,h,3,0,"div",1),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr",2),c["\u0275\u0275elementStart"](5,"div",3),c["\u0275\u0275elementStart"](6,"table",null,4),c["\u0275\u0275elementStart"](8,"thead"),c["\u0275\u0275elementStart"](9,"tr",5),c["\u0275\u0275elementStart"](10,"th",6),c["\u0275\u0275text"](11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th",6),c["\u0275\u0275text"](13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th",6),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"th",6),c["\u0275\u0275text"](17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"th",6),c["\u0275\u0275text"](19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](20,C,15,17,"tr",7),c["\u0275\u0275pipe"](21,"paginate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",8),c["\u0275\u0275elementStart"](23,"pagination-controls",9),c["\u0275\u0275listener"]("pageChange",function(t){return e.onPageChanged(t)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.transactions&&e.transactions.length>0),c["\u0275\u0275advance"](8),c["\u0275\u0275textInterpolate"]("Order"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Date"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Payment Type"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Total"),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"]("Actions"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",c["\u0275\u0275pipeBind2"](21,9,e.transactions,c["\u0275\u0275pureFunction3"](12,O,e.productsPerPage,e.currentPage,e.totalProducts))),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("autoHide",!0)("maxSize",15))},directives:[a.NgIf,a.NgForOf,p.LS,g.lW,o.rH,b.Hw],pipes:[p._s,a.DatePipe,u.U],styles:[".table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;border:1px solid #ccc;border-collapse:collapse;margin:0;padding:0;width:100%;font-size:16px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:24px;margin:.5em 0 .75em;font-weight:700}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.625em;text-align:center;word-wrap:anywhere}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;background-color:#017970;color:#dbe9ff}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{height:45px;border:none;outline:none;font-size:16px;font-weight:700;padding:0 15px;box-sizing:border-box;overflow:hidden;background:#b9d8fb}@media screen and (min-width:670px) and (max-width:850px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#017970}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}@media screen and (max-width:600px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#017970}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}.header[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.table-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}.pagination-container[_ngcontent-%COMP%]{text-align:center}.italic[_ngcontent-%COMP%]{font-style:italic;font-weight:700;color:#00c14c}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(_)],o.Bz]}),t})();var f=n(56861),x=n(35965),y=n(12231);let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,M,f.q,p.JX,d.ef,x.ae,y.D]]}),t})()},87514:(t,e,n)=>{"use strict";n.d(e,{i:()=>a});var a=function(t){return t[t.NONE=0]="NONE",t[t.PENDING=1]="PENDING",t[t.CONFIRM=2]="CONFIRM",t[t.PROCESSING=3]="PROCESSING",t[t.SHIPPING=4]="SHIPPING",t[t.DELIVERED=5]="DELIVERED",t[t.CANCEL=6]="CANCEL",t[t.REFUND=7]="REFUND",t}({})},31179:(t,e,n)=>{"use strict";n.d(e,{p:()=>l});var a=n(42693),o=n(529),r=n(35366);const i=o.N.apiBaseLink+"/api/order/",c=o.N.apiBaseLink+"/api/order-temporary/";let l=(()=>{class t{constructor(t){this.httpClient=t}placeOrder(t){return this.httpClient.post(i+"place-order",t)}placeTempOrder(t){return this.httpClient.post(c+"place-temp-order",t)}updateOrderSessionKey(t,e){return this.httpClient.post(c+"update-session-key/"+t+"/"+e,{})}getAllOrdersByUser(t,e,n){let o=new a.LE;return t&&(o=o.append("pageSize",t.pageSize),o=o.append("page",t.currentPage)),e&&(o=o.append("select",e)),n&&(o=o.append("orderType",n)),this.httpClient.get(i+"get-all-orders-by-user",{params:o})}getOrderDetails(t){return this.httpClient.get(i+"get-order-details/"+t)}cancelOrderByUser(t){return this.httpClient.put(i+"cancel-order-by-user/"+t,{})}deleteOrderByAdmin(t){return this.httpClient.delete(i+"delete-order-by-admin/"+t)}getAllTransactionByUser(t,e){let n=new a.LE;return t?(n=n.append("pageSize",t.pageSize),n=n.append("page",t.currentPage),e&&(n=n.append("select",e)),this.httpClient.get(i+"get-all-transactions-by-user",{params:n})):(e&&(n=n.append("select",e)),this.httpClient.get(i+"get-all-transactions-by-user",{params:n}))}getAllOrdersByAdmin(t,e,n){let o=new a.LE;return t?(o=o.append("pageSize",t.pageSize),o=o.append("page",t.currentPage),e&&(o=o.append("select",e)),this.httpClient.post(i+"get-all-orders-by-admin",{query:n},{params:o})):(e&&(o=o.append("select",e)),this.httpClient.post(i+"get-all-orders-by-admin",{query:n},{params:o}))}getAllOrdersByAdminNoPaginate(){return this.httpClient.get(i+"get-all-orders-by-admin-no-paginate")}changeOrderStatus(t){return this.httpClient.put(i+"change-order-status",t)}getAllTransactionByAdmin(t,e){let n=new a.LE;return t?(n=n.append("pageSize",t.pageSize),n=n.append("page",t.currentPage),e&&(n=n.append("select",e)),this.httpClient.get(i+"get-all-transaction-by-admin",{params:n})):(e&&(n=n.append("select",e)),this.httpClient.get(i+"get-all-transaction-by-admin",{params:n}))}testSslSmsApi(){return this.httpClient.get(i+"sent-test-ssl-message")}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275inject"](a.eN))},t.\u0275prov=r["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);